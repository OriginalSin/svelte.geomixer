<li class="line id_{properties ? properties.name : 'root'}" on:mouseover="mouseOverOut(event, true)">
	{#if properties}
		{#if line.type !== 'map'}
			<div class="borders "></div>
			<input class="expander hidden" type="checkbox" checked="{properties.expanded ? true : false}" />
			<span class="expander expanderCont"><svg role="img" class="svgIcon"><use xlink:href="#arrow-small-down" href="#arrow-small-down"></use></svg></span>
			{#if line.type === 'layer'}
				{#if properties.styles.length > 1}
					<span class="cont-overlays"><svg role="img" class="svgIcon"><use xlink:href="#overlays" href="#overlays"></use></svg></span>
				{/if}
				<span class="icons ">
					<span class="cont-center hidden"  title="Move map to this layer">
						<svg role="img" class="svgIcon"><use xlink:href="#center-on-click" href="#center-on-click"></use></svg>
					</span>
					{#if properties.description}
						<span class="cont-info" title="View description">
							<svg role="img" class="svgIcon"><use xlink:href="#info-circle-i" href="#info-circle-i"></use></svg>
						</span>
					{/if}
				</span>
			{/if}
		{/if}
		<span class="cont">
			{#if line.type !== 'map'}
				<input class="check visibility " type="checkbox">
				<span class="styleIcon gmx-style-legend">
					<span class="legendIconCell style">
						<span class="legendIconStyle point" style="background-color: rgba(255, 255, 255, 0.2); border-color: rgb(0, 0, 255);"></span>
					</span>
				</span>
			{/if}
			<label class="title">{properties.title}</label>
			<div class="description collapse"></div>
			<div class="legend collapse"></div>
		</span>
	{/if}
	{#if line.content.children}
		<ul class="group css-treeview id_{properties ? properties.name : 'root'}">
		{#each line.content.children || [] as child}
			<svelte:self line="{child}" />
		{/each}
		</ul>
	{/if}
</li>
 

<style>
.TreeView {
    overflow: scroll;
    height: calc(100vh - 30px);
    width: 360px;
    position: absolute;
}
ul {
	padding-inline-start: 12px;
}
li {
    list-style: none;
	line-height: 10px;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 93%;
    overflow: hidden;	
}

svg {
    height: 14px;
    width: 14px;
}
.expanderCont {
    margin-left: -20px;
	pointer-events: none;
}
.cont-center {
	visibility: hidden;
}
/*
li.line:hover .cont-center {
	visibility: visible;
}

.line input.expander:checked ~ ul {
    display: block;
}

.line input.expander ~ ul {
    display: none;
}
*/
span.cont-overlays {
    position: absolute;
    left: 4px;
	padding-top: 4px;
}
span.icons {
    right: 2px;
    position: absolute;
}

</style>
<script>
	export default {
		data() {
			return {
				container: null,
				line: null
			}
		},
		computed: {
			properties: ({ line }) => line.content.properties,
			minutes: ({ line }) => (new Date()).getMinutes(),
			seconds: ({ line }) => (new Date()).getSeconds()
		},
		methods: {
			createMap(it) {
		// var type = tItem.type,
			// props = tItem.content.properties,
			// id = props ? props.GroupID || props.name : 'root',
			// tNode = L.DomUtil.create('ul', 'css-treeview node-props-' + id),
			// node = this._addLine(props, type);

			// tNode.appendChild(node);

		// if (tItem.content.children) {	// могут быть потомки
            // for (var i = 0, len = tItem.content.children.length; i < len; i++) {
				// node.appendChild(this._addGroupNode(tItem.content.children[i]));
            // }
		// }
		// return tNode;

			},
			mouseOverOut(ev, flag) {
				let target = ev.target,
					node = target.getElementsByClassName('cont-center')[0];
console.log('mouseover', node); // true
				if (this.prevNode) {
					this.prevNode.style.visibility = 'hidden';
				}
				if (node) {
					this.prevNode = node;
					node.style.visibility = flag ? 'visible' : 'hidden';
				}
			}
		},
		// components: {
			// GroupNode: './GroupNode.html'
		// },

		onstate({ changed, current, previous }) {
// console.log('LineNode in onstate', changed, current, previous);
			if (changed.group && current.group) {
				// this.createMap(current.permalink);
				//this.getPermalink(current.urlParams.config)
			}
		}
	}
</script>
